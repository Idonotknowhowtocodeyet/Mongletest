<!DOCTYPE html>
<html>
<head>
    <title>Google Drive</title>
    <link rel="icon" href="https://ssl.gstatic.com/images/branding/product/1x/drive_2020q4_32dp.png">
    <style>
        :root { --bg: #020617; --card: #0f172a; --accent: #3b82f6; --text: #f8fafc; --term: #4ade80; }
        body { background: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; margin: 0; overflow-x: hidden; }
        
        /* --- LOGIN & HACKER THEME --- */
        #authLayer { position: fixed; inset: 0; background: #000; z-index: 100000; display: flex; flex-direction: column; align-items: center; justify-content: center; background-image: radial-gradient(circle at center, #111 0%, #000 100%); }
        .login-box { width: 400px; padding: 40px; background: rgba(15, 23, 42, 0.8); border: 1px solid #1e293b; border-radius: 20px; text-align: center; backdrop-filter: blur(10px); box-shadow: 0 0 50px rgba(59, 130, 246, 0.1); transition: 0.3s; }
        
        .hacker-title { font-family: monospace; font-size: 3rem; color: var(--accent); margin: 0; text-shadow: 0 0 15px var(--accent); }
        .hacker-subtitle { font-family: monospace; color: #64748b; letter-spacing: 3px; margin-bottom: 30px; font-size: 0.9rem; }
        
        .update-log { text-align: left; background: #000; border: 1px solid #333; padding: 15px; margin-top: 20px; border-radius: 8px; font-family: monospace; font-size: 0.8rem; color: #94a3b8; }
        .update-log h4 { color: var(--term); margin: 0 0 5px 0; border-bottom: 1px solid #333; padding-bottom: 5px; }

        .input-field { width: 100%; padding: 15px; background: #111; border: 1px solid #333; color: white; border-radius: 8px; box-sizing: border-box; font-size: 1.1rem; outline: none; transition: 0.3s; }
        .input-field:focus { border-color: var(--accent); box-shadow: 0 0 15px rgba(59, 130, 246, 0.3); }
        
        .btn-main { width: 100%; padding: 15px; margin-top: 15px; background: var(--accent); color: white; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; transition: 0.2s; }
        .btn-main:hover { transform: scale(1.02); }

        .admin-toggle { margin-top: 20px; color: #333; font-size: 0.8rem; cursor: pointer; text-decoration: underline; }
        .admin-toggle:hover { color: var(--accent); }

        /* --- ARCADE UI --- */
        .navbar { background: #0f172a; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #1e293b; position: sticky; top: 0; z-index: 1000; }
        .nav-btn { background: #1e293b; color: white; border: none; padding: 8px 15px; border-radius: 6px; cursor: pointer; font-weight: bold; margin-left: 10px; }
        
        .container { padding: 30px; max-width: 1400px; margin: auto; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; }
        .game-card { background: var(--card); border-radius: 15px; padding: 20px; text-align: center; border: 1px solid #1e293b; position: relative; cursor: pointer; transition: 0.3s; }
        .game-card:hover { transform: translateY(-5px); border-color: var(--accent); }
        .fav-star { position: absolute; top: 10px; right: 10px; color: rgba(255,255,255,0.1); font-size: 24px; cursor: pointer; }
        .fav-star.active { color: #fbbf24; text-shadow: 0 0 10px #fbbf24; }
        
        #gameView { position: fixed; inset: 0; background: #000; z-index: 50000; display: none; flex-direction: column; }
        iframe { flex-grow: 1; border: none; }

        /* --- PRANK SCREENS --- */
        #destructScreen { position: fixed; inset: 0; background: white; z-index: 200000; display: none; flex-direction: column; align-items: center; justify-content: center; color: black; opacity: 0; transition: 5s; }
        #hackerScreen { position: fixed; inset: 0; background: black; color: #0f0; font-family: monospace; padding: 20px; z-index: 150000; display: none; pointer-events: none; }
    </style>
</head>
<body>

    <div id="authLayer">
        <div id="plebLogin" class="login-box">
            <h1 class="hacker-title">MONGLE</h1>
            <p class="hacker-subtitle">ARCADE SYSTEM V6.3</p>
            
            <input type="text" id="username" class="input-field" placeholder="Create Username...">
            <button class="btn-main" onclick="loginPleb()">ENTER DATABASE</button>
            
            <div class="update-log">
                <h4>:: SYSTEM UPDATES ::</h4>
                > Added Cloak (About:Blank)<br>
                > Fixed Admin Panel Black Screen<br>
                > Restored FNAF & Favorites<br>
                > Security Patch Applied
            </div>

            <div class="admin-toggle" onclick="toggleAdminMode(true)">[ ADMIN ACCESS ]</div>
        </div>

        <div id="adminLogin" class="login-box" style="display:none; border-color: #ef4444;">
            <h1 class="hacker-title" style="color:#ef4444; text-shadow: 0 0 15px red;">ROOT</h1>
            <p class="hacker-subtitle">RESTRICTED AREA</p>
            
            <input type="password" id="adminPass" class="input-field" placeholder="Enter Root Key..." style="border-color:#ef4444;">
            <button class="btn-main" style="background:#ef4444;" onclick="loginAdmin()">AUTHENTICATE</button>
            
            <div class="admin-toggle" onclick="toggleAdminMode(false)">[ RETURN TO USER ]</div>
        </div>
    </div>

    <div id="arcadeUI" style="display:none;">
        <div class="navbar">
            <div>
                <span style="color:var(--term); font-weight:bold;">‚óè ONLINE</span>
                <span id="userDisplay" style="color:#64748b; margin-left:10px;"></span>
            </div>
            <div>
                <input type="text" id="search" onkeyup="search()" placeholder="Search..." style="padding:8px; background:#000; border:1px solid #333; color:white; border-radius:5px;">
                <button class="nav-btn" onclick="openCloak()">üëÅÔ∏è CLOAK</button>
                <button class="nav-btn" style="background:#ef4444;" onclick="location.replace('https://google.com')">PANIC</button>
            </div>
        </div>

        <div class="container">
            <div id="favSec" style="display:none;"><h2 style="color:#fbbf24;">‚≠ê FAVORITES</h2><div id="favGrid" class="grid"></div></div>
            <div id="fnafSec" style="display:none;"><h2 style="color:#ef4444;">üêª FREDDY'S</h2><div id="fnafGrid" class="grid"></div></div>
            <h2 style="color:var(--accent);">üïπÔ∏è GAMES</h2>
            <div id="mainGrid" class="grid"></div>
        </div>
    </div>

    <div id="gameView">
        <div style="background:#000; padding:10px; display:flex; justify-content:space-between;">
            <button class="nav-btn" onclick="closeGame()">‚Üê EXIT</button>
            <button class="nav-btn" style="background:#ef4444;" onclick="location.replace('https://google.com')">PANIC</button>
        </div>
        <iframe id="gameFrame"></iframe>
    </div>

    <div id="destructScreen"><h1>SYSTEM_HALTED</h1></div>
    <div id="hackerScreen"></div>

    <script>
        const REPO = { user: "bob154526-hue", name: "Mongle", pass: "1234" };

        // --- LOGIN SYSTEMS ---
        function toggleAdminMode(showAdmin) {
            document.getElementById('plebLogin').style.display = showAdmin ? 'none' : 'block';
            document.getElementById('adminLogin').style.display = showAdmin ? 'block' : 'none';
        }

        function loginPleb() {
            const u = document.getElementById('username').value.trim();
            if(u) {
                sessionStorage.setItem('mUser', u);
                startArcade();
            }
        }

        function loginAdmin() {
            if(document.getElementById('adminPass').value === REPO.pass) {
                sessionStorage.setItem('mUser', 'ADMIN');
                sessionStorage.setItem('mAuth', 'true'); // Key for admin panel
                location.href = 'wiki.html'; // Go to fixed admin panel
            } else {
                alert("ACCESS DENIED");
            }
        }

        function startArcade() {
            document.getElementById('authLayer').style.display = 'none';
            document.getElementById('arcadeUI').style.display = 'block';
            document.getElementById('userDisplay').innerText = "USER: " + sessionStorage.getItem('mUser').toUpperCase();
            loadGames();
            checkPranks();
        }

        // --- CLOAKING (About:Blank) ---
        function openCloak() {
            const win = window.open('about:blank', '_blank');
            if(!win) return alert("Pop-ups blocked! Allow them to use Cloak.");
            
            const doc = win.document;
            const iframe = doc.createElement('iframe');
            iframe.style.width = "100%";
            iframe.style.height = "100vh";
            iframe.style.border = "none";
            iframe.style.margin = "0";
            iframe.src = window.location.href;
            
            doc.body.style.margin = "0";
            doc.body.appendChild(iframe);
            window.location.replace("https://google.com"); // Panic close original
        }

        // --- GAME ENGINE ---
        async function loadGames() {
            const res = await fetch(`https://api.github.com/repos/${REPO.user}/${REPO.name}/contents/`);
            const files = await res.json();
            const favs = JSON.parse(localStorage.getItem('mFavs')) || [];

            files.forEach(file => {
                if(!file.name.endsWith('.html') || file.name === 'index.html' || file.name === 'wiki.html') return;
                
                const name = file.name.replace('.html','');
                const isFav = favs.includes(file.name);
                
                const card = document.createElement('div');
                card.className = 'game-card';
                card.innerHTML = `<span class="fav-star ${isFav?'active':''}" onclick="toggleFav(event,'${file.name}')">‚òÖ</span>
                                  <div onclick="play('${file.download_url}')"><div style="font-size:40px">üéÆ</div><b>${name}</b></div>`;

                if(isFav) {
                    document.getElementById('favSec').style.display = 'block';
                    document.getElementById('favGrid').appendChild(card.cloneNode(true));
                    document.getElementById('favGrid').lastChild.onclick=()=>play(file.download_url);
                }
                if(name.toLowerCase().includes('fnaf') || name.toLowerCase().includes('freddy')) {
                    document.getElementById('fnafSec').style.display = 'block';
                    document.getElementById('fnafGrid').appendChild(card);
                } else {
                    document.getElementById('mainGrid').appendChild(card);
                }
            });
        }

        async function play(url) {
            const r = await fetch(url); const h = await r.text();
            document.getElementById('gameView').style.display = 'flex';
            document.getElementById('gameFrame').srcdoc = h;
        }

        function toggleFav(e, f) {
            e.stopPropagation();
            let favs = JSON.parse(localStorage.getItem('mFavs')) || [];
            favs = favs.includes(f) ? favs.filter(x=>x!==f) : [...favs, f];
            localStorage.setItem('mFavs', JSON.stringify(favs));
            location.reload();
        }

        function search() {
            let q = document.getElementById('search').value.toLowerCase();
            document.querySelectorAll('.game-card').forEach(c => c.style.display = c.innerText.toLowerCase().includes(q) ? 'block' : 'none');
        }

        function closeGame() { document.getElementById('gameView').style.display='none'; document.getElementById('gameFrame').srcdoc=""; }

        // --- PRANK CHECK ---
        function checkPranks() {
            const p = localStorage.getItem('mPrank');
            if(p === 'destruct') {
                document.getElementById('destructScreen').style.display='flex';
                setTimeout(()=>document.getElementById('destructScreen').style.opacity='1', 100);
            } else if(p === 'hacker') {
                document.getElementById('hackerScreen').style.display='block';
                setInterval(() => {
                    let d = document.createElement('div');
                    d.innerText = "> UPLOADING_DATA_PACKET_" + Math.random();
                    document.getElementById('hackerScreen').appendChild(d);
                }, 100);
            }
        }
    </script>
</body>
</html>
