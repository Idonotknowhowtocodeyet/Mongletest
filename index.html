<!DOCTYPE html>
<html>
<head>
    <title>Google Docs</title>
    <style>
        :root { --bg: #020617; --card: #0f172a; --accent: #3b82f6; --text: #f8fafc; }
        body { background: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; margin: 0; overflow-x: hidden; }
        
        /* PRANK OVERLAYS */
        #destructScreen { position: fixed; inset: 0; background: white; z-index: 100000; display: none; color: black; flex-direction: column; align-items: center; justify-content: center; opacity: 0; transition: 5s; }
        #hackerScreen { position: fixed; inset: 0; background: black; color: #0f0; font-family: monospace; padding: 20px; z-index: 90000; display: none; overflow: hidden; pointer-events: none; }
        #maintScreen { position: fixed; inset: 0; background: #000; z-index: 80000; display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center; border: 4px solid red; }

        /* UI ELEMENTS */
        .navbar { background: #0f172a; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #1e293b; position: sticky; top: 0; z-index: 1000; }
        .container { padding: 30px; max-width: 1400px; margin: 0 auto; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; margin-bottom: 50px; }
        
        .game-card { background: var(--card); border-radius: 15px; padding: 20px; text-align: center; cursor: pointer; border: 1px solid #1e293b; transition: 0.3s; position: relative; }
        .game-card:hover { border-color: var(--accent); transform: translateY(-5px); }
        .fav-star { position: absolute; top: 10px; right: 10px; cursor: pointer; color: rgba(255,255,255,0.1); font-size: 24px; }
        .fav-star.active { color: #fbbf24; text-shadow: 0 0 10px #fbbf24; }

        .section-header { color: var(--accent); border-left: 5px solid var(--accent); padding-left: 15px; margin-bottom: 25px; text-transform: uppercase; font-size: 1.4rem; letter-spacing: 1px; }
        
        /* GAME VIEW */
        #gameView { position: fixed; inset: 0; background: #000; z-index: 30000; display: none; flex-direction: column; }
        iframe { flex-grow: 1; border: none; background: #fff; }
        .btn { padding: 10px 20px; border-radius: 8px; border: none; cursor: pointer; font-weight: bold; color: white; background: var(--accent); }
    </style>
</head>
<body>

    <div id="destructScreen">
        <h1 style="font-size: 3rem;">CRITICAL_SYSTEM_FAILURE</h1>
        <p>Memory Dump: 100% Complete. System Halted.</p>
    </div>
    <div id="hackerScreen"></div>
    <div id="maintScreen">
        <h1 style="color:red; font-size: 3rem;">OFFLINE</h1>
        <p>Maintenance Mode Active.</p>
        <input type="password" id="maintPass" placeholder="Bypass..." style="margin-top:20px; padding:10px;">
        <button class="btn" onclick="checkMaint()">Unlock</button>
    </div>

    <div class="navbar">
        <h1 style="margin:0; font-size: 1.8rem; color: var(--accent);">MONGLE ARCADE</h1>
        <div style="display:flex; gap:12px;">
            <input type="text" id="search" placeholder="Search games..." onkeyup="search()" style="padding:10px; background:#000; color:white; border:1px solid #333; border-radius:10px; width: 200px;">
            <button class="btn" style="background:#ef4444;" onclick="location.replace('https://google.com')">PANIC</button>
        </div>
    </div>

    <div class="container">
        <div id="favSec" style="display:none;">
            <h2 class="section-header">‚≠ê Favorites</h2>
            <div id="favGrid" class="grid"></div>
        </div>

        <div id="fnafSec" style="display:none;">
            <h2 class="section-header">üêª Freddy's Collection</h2>
            <div id="fnafGrid" class="grid"></div>
        </div>

        <h2 class="section-header">üïπÔ∏è All Games</h2>
        <div id="mainGrid" class="grid"></div>
    </div>

    <div id="gameView">
        <div style="background:#000; padding:10px; display:flex; justify-content:space-between;">
            <button class="btn" onclick="exitGame()">‚Üê Close Game</button>
            <button class="btn" style="background:#ef4444;" onclick="location.replace('https://google.com')">PANIC</button>
        </div>
        <iframe id="gameFrame"></iframe>
    </div>

    <script>
        const REPO = { user: "bob154526-hue", name: "Mongle" };

        // 1. PRANK/MAINT LOGIC
        function applyPranks() {
            const prank = localStorage.getItem('mPrank');
            if (prank === 'destruct') {
                document.getElementById('destructScreen').style.display = 'flex';
                setTimeout(() => { document.getElementById('destructScreen').style.opacity = '1'; }, 100);
            } else if (prank === 'hacker') {
                document.getElementById('hackerScreen').style.display = 'block';
                setInterval(() => {
                    let p = document.createElement('p');
                    p.innerText = "> DECRYPTING_FILE_" + Math.random().toString(16).slice(2, 8) + ".dll ... SUCCESS";
                    document.getElementById('hackerScreen').appendChild(p);
                    if(document.getElementById('hackerScreen').childElementCount > 30) document.getElementById('hackerScreen').firstChild.remove();
                }, 150);
            }
            if (localStorage.getItem('mMaint') === 'true' && !sessionStorage.getItem('mBypass')) {
                document.getElementById('maintScreen').style.display = 'flex';
            }
        }

        function checkMaint() {
            if(document.getElementById('maintPass').value === '1234') {
                sessionStorage.setItem('mBypass', 'true');
                location.reload();
            }
        }

        // 2. CORE GAME LOADING
        async function load() {
            const res = await fetch(`https://api.github.com/repos/${REPO.user}/${REPO.name}/contents/`);
            const files = await res.json();
            const favs = JSON.parse(localStorage.getItem('mFavs')) || [];

            files.forEach(file => {
                if(!file.name.endsWith('.html') || file.name === 'index.html' || file.name === 'wiki.html') return;
                const name = file.name.replace('.html','');
                const isFav = favs.includes(file.name);
                
                const card = document.createElement('div');
                card.className = 'game-card';
                card.innerHTML = `<span class="fav-star ${isFav?'active':''}" onclick="toggleFav(event,'${file.name}')">‚òÖ</span>
                                  <div onclick="play('${file.download_url}')"><div style="font-size:45px">üéÆ</div><b style="display:block;margin-top:10px;">${name}</b></div>`;
                
                // Sort into Favorites
                if(isFav) {
                    document.getElementById('favSec').style.display = 'block';
                    document.getElementById('favGrid').appendChild(card.cloneNode(true));
                    document.getElementById('favGrid').lastChild.onclick = () => play(file.download_url);
                }

                // Sort into Freddy or Main
                if(name.toLowerCase().includes('fnaf') || name.toLowerCase().includes('freddy')) {
                    document.getElementById('fnafSec').style.display = 'block';
                    document.getElementById('fnafGrid').appendChild(card);
                } else {
                    document.getElementById('mainGrid').appendChild(card);
                }
            });
        }

        async function play(url) {
            const r = await fetch(url);
            const h = await r.text();
            document.getElementById('gameView').style.display = 'flex';
            document.getElementById('gameFrame').srcdoc = h;
        }

        function toggleFav(e, f) {
            e.stopPropagation();
            let favs = JSON.parse(localStorage.getItem('mFavs')) || [];
            favs = favs.includes(f) ? favs.filter(x => x !== f) : [...favs, f];
            localStorage.setItem('mFavs', JSON.stringify(favs));
            location.reload();
        }

        function search() {
            let q = document.getElementById('search').value.toLowerCase();
            // SECRET KEY: Type "admin" in search to go to admin panel
            if (q === 'admin') { location.href = 'wiki.html'; }
            document.querySelectorAll('.game-card').forEach(c => {
                c.style.display = c.innerText.toLowerCase().includes(q) ? 'block' : 'none';
            });
        }

        function exitGame() { document.getElementById('gameView').style.display = 'none'; document.getElementById('gameFrame').srcdoc = ""; }

        applyPranks();
        load();
    </script>
</body>
</html>
