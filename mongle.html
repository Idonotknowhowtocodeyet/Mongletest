<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MONGLE_STRESS_TEST</title>
   <style>
    /* New Button Style for Network */
    #net-btn {
        width: 100%; margin-top: 5px; background: #003366; color: #fff; 
        border: 1px solid #0055ff; padding: 5px; cursor: pointer; font-family: monospace;
        font-weight: bold; font-size: 10px;
    }
    #net-btn:hover { background: #0055ff; }
</style>

<body>
    <div id="debug-panel">
        <div class="stat"><span>FPS:</span><b id="fps">0</b></div>
        <div class="stat"><span>MEM_LOAD:</span><b id="entCount">0</b></div>
        <div class="stat"><span>NET_STATUS:</span><b id="netState">IDLE</b></div>
        
        <button id="stress-btn" onclick="injectChaos()">INJECT 100 ENTITIES</button>
        <button id="net-btn" onclick="stressNetwork()">BURST TO OVERSEER</button>
        <button id="stress-btn" style="background:#222; border-color:#444;" onclick="purgeMem()">PURGE MEMORY</button>
    </div>

    <div id="log-panel">
        <div class="log-entry">[ SYSTEM ] Network Debugger Ready.</div>
    </div>

    <canvas id="gameCanvas"></canvas>

<script>
    // ... (Keep existing game logic and player code) ...

    const FIREBASE_URL = "https://YOUR_PROJECT_ID.firebaseio.com/debug_logs.json";

    async function stressNetwork() {
        const uiNet = document.getElementById('netState');
        uiNet.innerText = "SENDING...";
        uiNet.style.color = "yellow";
        
        // Prepare a "Burst" packet of current game state
        const packet = {
            timestamp: Date.now(),
            entity_count: entities.length,
            fps: ui.fps.innerText,
            status: "STRESS_TEST_BURST"
        };

        try {
            pushLog("NETWORK: Attempting Outbound Burst...");
            
            // Using FETCH (REST API) instead of SDK for pure speed
            const response = await fetch(FIREBASE_URL, {
                method: 'POST',
                body: JSON.stringify(packet)
            });

            if (response.ok) {
                pushLog("NETWORK: Burst Accepted by Overseer.");
                uiNet.innerText = "SUCCESS";
                uiNet.style.color = "#00ff41";
            } else {
                throw new Error(`HTTP ${response.status}`);
            }
        } catch (err) {
            pushLog(`NET_ERROR: ${err.message}`, true);
            uiNet.innerText = "FAILED";
            uiNet.style.color = "red";
        }
    }

    // ... (Keep init/loop/draw functions) ...
</script>
</body>
</html>
